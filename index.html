<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maui Itinerary 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Pacifico&family=Kaushan+Script&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/MotionPathPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #60a5fa;
            background-image: url('https://i.imgur.com/zJOV1Ys.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }
        .font-pacifico {
            font-family: 'Pacifico', cursive;
        }
        .content-card {
            background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            position: relative;
            transition: opacity 0.2s ease-in-out;
            overflow: hidden; /* Keep this for special effects like floating bubbles */
        }
        /* New card style for the guidebook without conflicting properties */
        .guidebook-card {
            background-color: rgba(255, 255, 255, 0.9);
            position: relative;
            transition: opacity 0.2s ease-in-out;
            /* NO backdrop-filter or overflow property, allowing position:sticky to work */
        }
        .hana-card {
            background-color: transparent;
            backdrop-filter: none;
            padding: 0;
        }
        .hana-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)), url('https://images.unsplash.com/photo-1594361593358-439b8c1a4a8c?q=80&w=1887&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            z-index: 1;
        }
        .day-btn.active {
            background-color: #f97316; /* Sandy Orange */
            color: white !important;
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(249, 115, 22, 0.4);
            animation: pulse 2s infinite;
        }
        .day-btn.active span {
            color: white;
        }
        .day-btn {
            transition: all 0.3s ease;
             background-color: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            width: 9rem; /* 144px */
        }
        .day-btn:hover {
            transform: translateY(-3px);
        }
        nav.nav-scrolled {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        nav {
            transition: background-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        /* REVISED: Styles for the Guidebook Tabs as Icons */
        .guidebook-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            width: 6.5rem; /* 104px */
            height: 5rem;   /* 80px */
            padding: 0.5rem;
            border-radius: 0.75rem;
            background-color: rgba(255, 255, 255, 0.6);
            color: #374151;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .guidebook-tab .icon {
            font-size: 1.75rem;
            line-height: 1;
        }
        .guidebook-tab .label {
            font-size: 0.75rem;
            margin-top: 0.25rem;
            text-align: center;
        }
        .guidebook-tab:hover {
            background-color: rgba(255, 255, 255, 0.9);
        }
        .guidebook-tab.active {
            background-color: #0ea5e9; /* Sky Blue */
            color: white;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
            transform: translateY(-2px);
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        #guidebook-tabs-container {
            position: -webkit-sticky;
            position: sticky;
            top: 145px; 
            z-index: 20;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            margin-left: -1.5rem;
            margin-right: -1.5rem;
            padding: 0.75rem 1.5rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
        }
        @media (min-width: 1024px) {
            #guidebook-tabs-container {
                top: 0;
            }
        }
        .packing-item input:checked + .packing-label {
            text-decoration: line-through;
            color: #9ca3af;
        }
        .road-to-hana-car {
            position: absolute;
            z-index: 20;
            font-size: 2.5rem;
        }
        .modal-overlay { transition: opacity 0.3s ease; z-index: 100; }
        .modal-content { transition: transform 0.3s ease, opacity 0.3s ease; }
        .itinerary-item-clickable { cursor: pointer; transition: background-color: 0.2s ease; }
        .itinerary-item-clickable:hover { background-color: rgba(249, 250, 251, 0.5); }
        .header-text { text-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { 
            -ms-overflow-style: none; 
            scrollbar-width: none; 
            touch-action: pan-x;
        }
        .logo-link img { transition: transform 0.2s ease-in-out; }
        .logo-link:hover img { transform: scale(1.1); }
        .ticket {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            display: flex;
            overflow: hidden;
            margin-bottom: 1.5rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .ticket-link:hover .ticket {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);
        }
        .ticket-main { padding: 1rem; flex-grow: 1; }
        .ticket-rip {
            width: 4rem;
            border-left: 2px dashed #e5e7eb;
            position: relative;
        }
        .ticket-rip::before, .ticket-rip::after {
            content: '';
            position: absolute;
            width: 1.5rem;
            height: 1.5rem;
            background: rgba(243, 244, 246, 0.85);
            border-radius: 50%;
            left: -0.75rem;
        }
        .ticket-rip::before { top: -0.75rem; }
        .ticket-rip::after { bottom: -0.75rem; }
        .airline-logo { max-height: 1.5rem; width: auto; }
        @keyframes pulse { 0%, 100% { transform: scale(1.05); } 50% { transform: scale(1.08); } }
        .timeline-icon { animation: bounce-in 0.6s ease; transition: transform 0.2s ease; }
        .itinerary-item-clickable:hover .timeline-icon { transform: scale(1.2) rotate(10deg); }
        @keyframes bounce-in { 0% { transform: scale(0.5); opacity: 0; } 70% { transform: scale(1.1); opacity: 1; } 100% { transform: scale(1); } }
        .bubble, .floating-emoji { position: absolute; bottom: -30px; animation: rise 10s infinite ease-in; }
        .bubble { background-color: rgba(255, 255, 255, 0.8); border-radius: 50%; }
        .floating-emoji { font-size: 1.5rem; }
        @keyframes rise { 0% { transform: translateY(0) translateX(0); opacity: 1; } 100% { transform: translateY(-100vh) translateX(20px); opacity: 0; } }
        .scroll-animate { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .scroll-animate.visible { opacity: 1; transform: translateY(0); }
        .game-container {
            background-color: #1e3a8a;
            background-image: radial-gradient(circle, #2563eb 0%, #1e3a8a 70%);
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .font-kaushan { font-family: 'Kaushan Script', cursive; }
        #wheelContainer {
            position: relative;
            width: 100%;
            max-width: 280px;
            aspect-ratio: 1 / 1;
            margin: 1rem auto;
        }
        #wheel {
            width: 100%;
            height: 100%;
            display: block;
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(0,0,0,0.5), inset 0 0 15px rgba(0,0,0,0.3);
        }
        #lights {
            position: absolute;
            top: -5%;
            left: -5%;
            width: 110%;
            height: 110%;
            pointer-events: none;
        }
        .light {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #fff, 0 0 20px #ffdd87;
        }
        #pointer {
            position: absolute;
            left: 50%;
            top: -10px;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: #ef4444;
            clip-path: polygon(50% 100%, 0 0, 100% 0);
            border-radius: 5px;
            border: 3px solid white;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            z-index: 10;
            transform-origin: center bottom;
        }
        .spin-button {
            background-color: #22c55e;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            font-weight: 700;
            font-size: 1.25rem;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            border: 2px solid white;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.3), inset 0 -3px 0 rgba(0,0,0,0.2);
            text-transform: uppercase;
        }
        .spin-button:hover { background-color: #16a34a; }
        .spin-button:active {
            transform: scale(0.98);
            box-shadow: 0 2px 3px -1px rgba(0,0,0,0.3), inset 0 2px 0 rgba(0,0,0,0.2);
        }
        .spin-button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            border-color: #6b7280;
        }
        .key-card {
            background: #fdfbf4;
            border-radius: 0.75rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: flex;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }
        .key-card-left {
            background: #0077be;
            color: white;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            width: 5rem;
            text-align: center;
        }
        .key-card-logo {
            font-weight: 900;
            font-size: 1.5rem;
            border: 2px solid white;
            border-radius: 50%;
            width: 3rem;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }
        .key-card-hotel {
            font-size: 0.65rem;
            font-weight: bold;
            text-transform: uppercase;
            writing-mode: vertical-rl;
            transform: rotate(180deg);
        }
        .key-card-hole {
            width: 1rem;
            height: 1rem;
            background: #fdfbf4;
            border-radius: 50%;
            margin-top: 1rem;
        }
        .key-card-right {
            padding: 1rem;
            flex-grow: 1;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .key-card-strip {
            position: absolute;
            bottom: 1rem;
            left: 0;
            right: 0;
            height: 1.25rem;
            background: #333;
        }
    </style>
</head>
<body>

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-8">
            <h1 class="text-5xl md:text-6xl font-pacifico text-white header-text" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.4);">Maui Adventure</h1>
            <p class="text-lg text-white mt-2 header-text" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.4);">October 8 - 15, 2025</p>
            <p class="text-md text-gray-200 italic header-text" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.4);">"manifesting vibes, underestimating logistics"</p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8 lg:items-start">
            <nav class="lg:w-1/4 lg:sticky lg:top-4 lg:self-start sticky top-0 z-10 py-2 bg-blue-500/30 lg:bg-transparent backdrop-blur-sm lg:backdrop-blur-none -mx-4 px-4 lg:mx-0 lg:px-0">
                <h2 class="text-xl font-bold text-white mb-2 px-4 lg:px-0 header-text" style="text-shadow: 1px 1px 2px rgba(0,0,0,0.4);">Navigation</h2>
                <div class="flex flex-row lg:flex-col gap-2 overflow-x-auto lg:overflow-visible no-scrollbar">
                    <button onclick="showContent('map')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-green-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold text-green-700">Map</span>
                    </button>
                    <button onclick="showContent('travelHub')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-sky-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold text-sky-700">Travel Hub</span>
                    </button>
                    <button onclick="showContent('packing')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-amber-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold text-amber-700">Packing List</span>
                    </button>
                    <button onclick="showContent('day8')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                        <span class="font-bold">Oct 8</span> <span class="text-gray-600 text-sm block">Arrival</span>
                    </button>
                    <button onclick="showContent('day9')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 9</span> <span class="text-gray-600 text-sm block">Road to Hāna</span>
                    </button>
                    <button onclick="showContent('day10')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 10</span> <span class="text-gray-600 text-sm block">'Īao & West Maui</span>
                    </button>
                    <!-- ITINERARY SWAP: Oct 11 is now Chill Day -->
                    <button onclick="showContent('day11')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 11</span> <span class="text-gray-600 text-sm block">Kihei Chill Day</span>
                    </button>
                    <!-- ITINERARY SWAP: Oct 12 is now Snorkel Day -->
                    <button onclick="showContent('day12')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 12</span> <span class="text-gray-600 text-sm block">Snorkel & Sunset</span>
                    </button>
                     <button onclick="showContent('day13')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 13</span> <span class="text-gray-600 text-sm block">Upcountry</span>
                    </button>
                    <button onclick="showContent('day14')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 14</span> <span class="text-gray-600 text-sm block">Flex Day</span>
                    </button>
                     <button onclick="showContent('day15')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-cyan-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold">Oct 15</span> <span class="text-gray-600 text-sm block">Departure</span>
                    </button>
                    <button onclick="showContent('guidebook')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-purple-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold text-purple-700">Maui Guidebook</span>
                    </button>
                    <button onclick="showContent('crashOutGame')" class="day-btn text-center flex flex-col justify-center items-center p-4 rounded-lg shadow-md hover:bg-pink-100 flex-shrink-0 lg:w-full lg:text-left lg:items-start">
                         <span class="font-bold text-pink-700">Crash Out Game</span>
                    </button>
                </div>
            </nav>

            <main id="content-display" class="lg:w-3/4 mt-4 lg:mt-0">
             </main>
        </div>
    </div>

    <div id="review-modal" class="modal-overlay fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden" onclick="closeReviewModal()">
        <div class="modal-content bg-white rounded-2xl shadow-xl w-full max-w-md p-6 transform scale-95 opacity-0" onclick="event.stopPropagation()">
            <div class="flex justify-between items-start mb-4">
                <h3 id="modal-title" class="text-2xl font-bold text-gray-800">Reviews</h3>
                <button onclick="closeReviewModal()" class="text-gray-400 hover:text-gray-600 text-3xl leading-none">×</button>
            </div>
            <p id="modal-description" class="text-gray-600 mb-6">Check out what others are saying on your favorite platforms.</p>
            <div class="flex justify-around items-center pt-4">
                <a id="google-link" href="#" target="_blank" class="logo-link">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Google_Maps_icon_%282020%29.svg/1428px-Google_Maps_icon_%282020%29.svg.png" alt="Google Maps Logo" class="h-12">
                </a>
                <a id="yelp-link" href="#" target="_blank" class="logo-link">
                    <img src="https://m.yelp.com/apple-touch-icon.png" alt="Yelp Logo" class="h-12 rounded-lg">
                </a>
                <a id="instagram-link" href="#" target="_blank" class="logo-link">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Instagram_icon.png/2048px-Instagram_icon.png" alt="Instagram Logo" class="h-12">
                </a>
                <a id="tiktok-link" href="#" target="_blank" class="logo-link">
                     <img src="https://static.vecteezy.com/system/resources/previews/016/716/450/non_2x/tiktok-icon-free-png.png" alt="TikTok Logo" class="h-12">
                </a>
            </div>
        </div>
    </div>
    
    <script>
        // Data and constants remain the same...
        const itineraryData = {
            map: {
                title: "🗺️ Trip Map",
                isMap: true
            },
            travelHub: {
                title: "✈️ Travel Hub",
                bookings: [
                    {
                        type: "Condo",
                        name: "Maui Vista",
                        details: "2191 S Kihei Rd #2046, Kihei, HI 96753",
                        confirmation: "VRBO Conf: HA-ABCD12",
                        url: "https://www.aaoceanfront.com/vacation-rentals/maui/south-kihei/maui-vista/maui-vista-2406/"
                    },
                    {
                        type: "Car Rental",
                        name: "Alamo",
                        details: "Jeep Wrangler Unlimited or similar",
                        confirmation: "Confirmation: 1680372112",
                        logo: "https://upload.wikimedia.org/wikipedia/commons/8/89/Alamo_Rent_a_Car_%28logo%29.svg"
                    }
                ],
                passengers: [
                    { 
                        name: "Chris, Alex Yee, & Jade Kok",
                        flights: [
                            { type: "Outbound", airline: "Delta Air Lines", logo: "https://purepng.com/public/uploads/large/purepng.com-delta-air-lines-logologobrand-logoiconslogos-251519939710be40n.png", flightNum: "DL425", from: "LAX", to: "OGG", departure: "Wed, Oct 8 – 8:00 AM", arrival: "Wed, Oct 8 – 10:40 AM" },
                            { type: "Return", airline: "Delta Air Lines", logo: "https://purepng.com/public/uploads/large/purepng.com-delta-air-lines-logologobrand-logoiconslogos-251519939710be40n.png", flightNum: "DL463", from: "OGG", to: "LAX", departure: "Wed, Oct 15 – 12:05 PM", arrival: "Wed, Oct 15 – 8:25 PM" }
                        ]
                    },
                    {
                        name: "Timothy Lee",
                        flights: [
                            { type: "Outbound", airline: "Alaska Airlines", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Alaska_Airlines_logo.svg/1200px-Alaska_Airlines_logo.svg.png", flightNum: "AS8041", from: "SFO", to: "OGG", departure: "Wed, Oct 8 – 9:30 AM", arrival: "Wed, Oct 8 – 11:47 AM" },
                            { type: "Return", airline: "Hawaiian Airlines", logo: "https://iprsoftwaremedia.com/249/files/20173/5903cf8aa13835739c23ccba_HAL_r_h_rgb/HAL_r_h_rgb_91477b97-5878-4897-9e46-3f4643c6dc96-prv.jpg", flightNum: "HA42", from: "OGG", to: "SFO", departure: "Wed, Oct 15 – 10:30 AM", arrival: "Wed, Oct 15 – 6:32 PM" }
                        ]
                    }
                ]
            },
            day8: {
                title: "Wednesday, Oct 8 – Arrival + Ease In",
                items: [
                    { time: "10:40 AM", title: "Land at OGG", description: "Welcome to Maui! Pick up the rental car.", longDescription: "The adventure begins! We'll touch down at Kahului Airport, grab our bags, and pick up the rental car that will be our chariot for the week.", icon: "✈️", search: "Kahului Airport OGG", igUrl: "https://www.instagram.com/explore/tags/kahuluiairport/", ttUrl: "https://www.tiktok.com/search?q=kahului%20airport" },
                    { time: "12:00 PM", title: "Geste Shrimp Truck", description: "Locally loved shrimp truck - spicy pineapple shrimp is a must-try.", longDescription: "Famous for its legendary Hawaiian Scampi, Spicy Pineapple, and Lomi Lomi Salmon plates. This iconic food truck is a must-visit right after landing to kick off your trip with authentic, fresh, and flavorful local food.", icon: "🍤", search: "Geste Shrimp Truck Kahului", yUrl: "https://www.yelp.com/biz/geste-shrimp-truck-kahului", igUrl: "https://www.instagram.com/gesteshrimptruck/", ttUrl: "https://www.tiktok.com/search?q=geste%20shrimp%20truck%20maui" },
                    { time: "1:30 PM", title: "Costco Run", description: "Stock up on essentials, snacks, and drinks.", longDescription: "A crucial first stop to stock up on essentials for the condo. Grab some local snacks, drinks, fresh poke, and save a lot compared to resort prices. It's the ultimate Maui life hack.", icon: "🛒", search: "Costco Kahului", yUrl: "https://www.yelp.com/biz/costco-kahului", igUrl: "https://www.instagram.com/costco/", ttUrl: "https://www.tiktok.com/search?q=costco%20maui" },
                    { time: "3:00 PM", title: "Condo Check-In", description: "Unpack, unwind, and settle into island mode at Maui Vista.", longDescription: "Unpack, unwind, and settle into island mode at Maui Vista. This is our home base for the week, perfectly located to explore the beaches of South Maui.", icon: "🏡", search: "Maui Vista Kihei", yUrl: "https://www.yelp.com/biz/maui-vista-kihei" },
                    { time: "6:30 PM", title: "Tamura's Poke", description: "Legendary poke shop for a relaxed condo dinner.", longDescription: "A local legend for a reason. Tamura's offers some of the freshest and most creative poke on the island. We're grabbing a few different kinds for a casual and delicious first dinner at the condo.", icon: "🐟", search: "Tamura's Fine Wine & Liquors Kihei", yUrl: "https://www.yelp.com/biz/tamuras-fine-wine-and-liquors-kihei", igUrl: "https://www.instagram.com/tamurasfinewine/", ttUrl: "https://www.tiktok.com/search?q=tamuras%20poke%20maui" },
                ]
            },
            day9: {
                title: "Thursday, Oct 9 – Road to Hāna Adventure",
                special: "hana",
                items: [
                    { time: "5:30 AM", title: "Start Your Engines!", description: "Early start for a full day on the legendary Road to Hana.", longDescription: "An early start is key to beating the crowds on this legendary drive. We're setting out before sunrise to make the most of a full day of waterfalls, jungle hikes, and incredible coastal views.", icon: "🌅" },
                    { time: "Stop 1", title: "Twin Falls", description: "Quick waterfall hike.", longDescription: "Our first taste of the Road to Hana's beauty. This is an easily accessible stop with a short jungle walk to a beautiful waterfall. It's the perfect place to stretch our legs and grab some fresh fruit from the farm stand.", icon: "🏞️", search: "Twin Falls Maui", yUrl: "https://www.yelp.com/biz/twin-falls-trail-haiku", igUrl: "https://www.instagram.com/explore/tags/twinfallsmaui/", ttUrl: "https://www.tiktok.com/search?q=twin%20falls%20maui" },
                    { time: "Stop 2", title: "Aunty Sandy's", description: "Famous for banana bread.", longDescription: "You can't do the Road to Hana without stopping for Aunty Sandy's. This iconic spot on the Ke'anae Peninsula serves up warm, fresh-baked banana bread that's famous across the island.", icon: "🍞", search: "Aunty Sandy's Banana Bread Maui", yUrl: "https://www.yelp.com/biz/aunty-sandys-banana-bread-keanae-2", igUrl: "https://www.instagram.com/explore/tags/auntysandysbananabread/", ttUrl: "https://www.tiktok.com/search?q=aunty%20sandys%20banana%20bread" },
                    { time: "Stop 3", title: "Wai'ānapanapa State Park", description: "Stunning black sand + waves [MAKE RESERVATIONS].", longDescription: "Home to a stunning black sand beach, sea caves, and a dramatic volcanic coastline. This is a major highlight of the drive, offering incredible photo opportunities and a chance to see a different side of Maui's natural beauty. Reservations are a must!", icon: "🏖️", search: "Wai'ānapanapa State Park", yUrl: "https://www.yelp.com/biz/waianapanapa-state-park-hana", igUrl: "https://www.instagram.com/explore/tags/waianapanapastatepark/", ttUrl: "https://www.tiktok.com/search?q=waianapanapa%20state%20park" },
                    { time: "Stop 4", title: "Pua'a Ka'a Falls", description: "Waterfall swim stop.", longDescription: "The perfect spot for a refreshing afternoon dip. This wayside park has a beautiful waterfall and a natural swimming hole, offering a cool break from our drive.", icon: "💧", search: "Pua'a Ka'a State Wayside Park", yUrl: "https://www.yelp.com/biz/puaa-kaa-state-wayside-park-haiku", igUrl: "https://www.instagram.com/explore/tags/puaakaafalls/", ttUrl: "https://www.tiktok.com/search?q=puaa%20kaa%20falls" },
                    { time: "Stop 5", title: "Wailua Falls", description: "Final scenic stop.", longDescription: "One of the most photographed waterfalls on Maui, and for good reason. It's easily accessible from the road and offers a spectacular view of a powerful, cascading waterfall surrounded by lush greenery.", icon: "📸", search: "Wailua Falls Maui", yUrl: "https://www.yelp.com/biz/wailua-falls-hana", igUrl: "https://www.instagram.com/explore/tags/wailuafallsmaui/", ttUrl: "https://www.tiktok.com/search?q=wailua%20falls%20maui" },
                    { time: "Snacks", title: "Coconut Glen's & Hana Farms", description: "Vegan coconut ice cream & local fruit.", longDescription: "A sweet treat to cap off our Hana adventure. Coconut Glen's is famous for its delicious and unique vegan ice cream served in a coconut shell. Hana Farms is another great stop for local snacks and baked goods.", icon: "🥥", search: "Coconut Glen's Maui", yUrl: "https://www.yelp.com/biz/coconut-glens-ice-cream-nahiku", igUrl: "https://www.instagram.com/coconutglens/", ttUrl: "https://www.tiktok.com/search?q=coconut%20glens%20maui" },
                    { time: "6:00 PM", title: "Return to Kihei", description: "Arrive back at the condo.", longDescription: "Heading back to our home base after a full day of adventure. Time to relax, recharge, and get ready for another day in paradise.", icon: "🌙" },
                ]
            },
            day10: {
                title: "ʻĪao Valley + West Maui Loop",
                items: [
                    { time: "8:00 AM", title: "Four Sisters Bakery", description: "Island-famous for their warm, buttery rolls.", longDescription: "A local favorite in Wailuku, famous for its Filipino-inspired pastries and buttery rolls. It's the perfect place to grab a sweet breakfast before heading into the valley.", icon: "🥐", search: "Four Sisters Bakery Wailuku", yUrl: "https://www.yelp.com/biz/four-sisters-bakery-wailuku", igUrl: "https://www.instagram.com/explore/tags/foursistersbakery/", ttUrl: "https://www.tiktok.com/search?q=four%20sisters%20bakery%20maui" },
                    { time: "9:00 AM", title: "ʻĪao Valley State Monument", description: "Lush rainforest valley with a historic needle peak.", longDescription: "A sacred and historically significant valley known for its iconic ʻĪao Needle. We'll take a leisurely stroll through the lush rainforest, enjoying the stunning scenery and learning about the area's rich history.", icon: "⛰️", search: "ʻĪao Valley State Monument", yUrl: "https://www.yelp.com/biz/iao-valley-state-monument-wailuku", igUrl: "https://www.instagram.com/explore/tags/iaovalley/", ttUrl: "https://www.tiktok.com/search?q=iao%20valley" },
                    { time: "11:15 AM", title: "Leoda's Kitchen & Pie Shop", description: "Try the banana cream pie or savory pot pies.", longDescription: "A must-stop for lunch in Olowalu. Leoda's is famous for its incredible sweet and savory pies, as well as delicious sandwiches and salads. The banana cream pie is legendary!", icon: "🥧", search: "Leoda's Kitchen & Pie Shop Olowalu", yUrl: "https://www.yelp.com/biz/leodas-kitchen-and-pie-shop-lahaina", igUrl: "https://www.instagram.com/leodasmaui/", ttUrl: "https://www.tiktok.com/search?q=leodas%20pie%20shop%20maui" },
                    { time: "12:30 PM", title: "Baby Beach", description: "Gentle reef-protected beach, ideal for a relaxing swim.", longDescription: "After a busy morning, it's time to relax. This Lahaina beach has a protective reef that creates calm, shallow waters, making it the perfect spot for a peaceful swim and some easy snorkeling.", icon: "🌊", search: "Baby Beach Lahaina", yUrl: "https://www.yelp.com/biz/baby-beach-lahaina", igUrl: "https://www.instagram.com/explore/tags/babybeachlahaina/", ttUrl: "https://www.tiktok.com/search?q=baby%20beach%20lahaina" },
                ]
            },
            day11: {
                title: "Saturday, Oct 11 – Chill in Kihei",
                items: [
                    { time: "9:00 AM", title: "Akamai Coffee Co.", description: "Top-tier espresso to start your lazy day right.", longDescription: "Starting our chill day with some of the best coffee on Maui. Akamai roasts its own beans and offers a variety of delicious specialty drinks to get our morning started right.", icon: "☕", search: "Akamai Coffee Kihei", yUrl: "https://www.yelp.com/biz/akamai-coffee-co-kihei-3", igUrl: "https://www.instagram.com/akamaicoffee/", ttUrl: "https://www.tiktok.com/search?q=akamai%20coffee%20maui" },
                    { time: "10:00 AM", title: "Kamaole Beach Park II", description: "A low-key beach day with calm surf and shady palms.", longDescription: "A beautiful and relaxed beach day. Kam II is known for its soft sand, calm waters, and great snorkeling along the rocky points. It's the perfect place to unwind.", icon: "🏖️", search: "Kamaole Beach Park II Kihei", yUrl: "https://www.yelp.com/biz/kamaole-beach-park-ii-kihei", igUrl: "https://www.instagram.com/explore/tags/kamaolebeachpark2/", ttUrl: "https://www.tiktok.com/search?q=kamaole%20beach%20park%202" },
                    { time: "1:00 PM", title: "Paia Fish Market Southside", description: "Casual mahi sandwiches, grilled fish, and cold beer.", longDescription: "A casual and delicious lunch spot in Kihei. Famous for their fresh fish sandwiches and plates, it's a must-try for a laid-back Maui meal.", icon: "🍔", search: "Paia Fish Market Southside Kihei", yUrl: "https://www.yelp.com/biz/paia-fish-market-southside-kihei", igUrl: "https://www.instagram.com/paiafishmarket/", ttUrl: "https://www.tiktok.com/search?q=paia%20fish%20market%20kihei" },
                    { time: "3:30 PM", title: "Ululani's Shave Ice", description: "Maui's best shave ice with natural fruit syrups.", longDescription: "You can't come to Maui without trying Ululani's. They're known for their incredibly fine shave ice and all-natural fruit syrups. It's the ultimate Hawaiian treat.", icon: "🍧", search: "Ululani's Hawaiian Shave Ice Kihei", yUrl: "https://www.yelp.com/biz/ululanis-hawaiian-shave-ice-kihei-4", igUrl: "https://www.instagram.com/ululanishawaiianshaveice/", ttUrl: "https://www.tiktok.com/search?q=ululanis%20shave%20ice" },
                    { time: "7:00 PM", title: "Ka'ana Kitchen", description: "Refined Hawaiian cuisine in a sunset-lit setting.", longDescription: "A special dinner to celebrate our trip. Ka'ana Kitchen at the Andaz Maui offers a unique farm-to-table dining experience with creative, locally sourced dishes.", icon: "🍽️", search: "Ka'ana Kitchen at Andaz Maui", yUrl: "https://www.yelp.com/biz/kaana-kitchen-wailea", igUrl: "https://www.instagram.com/andazmaui/", ttUrl: "https://www.tiktok.com/search?q=kaana%20kitchen%20andaz%20maui" },
                ]
            },
            // RESERVATION ADDED
            day12: {
                title: "Sunday, Oct 12 – Snorkel + West Maui Sunset",
                special: "snorkel",
                items: [
                    { time: "6:30 AM", title: "Molokini & Turtle Town Snorkel", description: "Half-day raft tour with vibrant coral and sea turtles.", longDescription: "An early start for an unforgettable snorkeling adventure. We're heading out to the Molokini Crater, a volcanic caldera teeming with vibrant coral and marine life, followed by a stop at Turtle Town to swim with the honu (sea turtles).", icon: "🐢", search: "Molokini Snorkel Tour Maalaea Harbor" },
                    { time: "12:30 PM", title: "South Maui Fish Co.", description: "Legendary poke plates and grilled fish.", longDescription: "After a morning in the water, we'll refuel at this top-rated food truck. Known for its incredibly fresh poke bowls and grilled fish tacos, it's the perfect post-snorkeling lunch.", icon: "🐠", search: "South Maui Fish Co. Kihei", yUrl: "https://www.yelp.com/biz/south-maui-fish-co-kihei", igUrl: "https://www.instagram.com/southmauifishco/", ttUrl: "https://www.tiktok.com/search?q=south%20maui%20fish%20company" },
                    { time: "5:00 PM", title: "Merriman's", description: "Reservation for 4 (Confirmation #60996). Sunset dinner.", longDescription: "The grand finale of our day. Merriman's offers one of the best sunset dinner views on the island, with an incredible farm-to-table menu. It's the perfect spot for a memorable evening.", icon: "🌅", search: "Merriman's Kapalua", yUrl: "https://www.yelp.com/biz/merrimans-kapalua-lahaina", igUrl: "https://www.instagram.com/merrimansmaui/", ttUrl: "https://www.tiktok.com/search?q=merrimans%20kapalua" },
                ]
            },
            day13: {
                title: "Monday, Oct 13 – Upcountry Maui",
                items: [
                    { time: "9:00 AM", title: "La Provence", description: "Charming French café with croissants and a view.", longDescription: "A charming French café in the heart of Upcountry. We'll enjoy delicious pastries and coffee with beautiful views of the island.", icon: "🥐", search: "La Provence Kula", yUrl: "https://www.yelp.com/biz/la-provence-kula-2", igUrl: "https://www.instagram.com/explore/tags/laprovencekula/", ttUrl: "https://www.tiktok.com/search?q=la%20provence%20kula%20maui" },
                    { time: "10:30 AM", title: "Ali'i Kula Lavender Farm", description: "Stroll through peaceful gardens with scenic vistas.", longDescription: "A peaceful and fragrant escape. We'll wander through the beautiful lavender fields, enjoy the stunning bi-coastal views, and maybe even try a lavender scone.", icon: "💜", search: "Ali'i Kula Lavender Farm", yUrl: "https://www.yelp.com/biz/alii-kula-lavender-farm-kula", igUrl: "https://www.instagram.com/aliikulalavender/", ttUrl: "https://www.tiktok.com/search?q=alii%20kula%20lavender%20farm" },
                    { time: "12:30 PM", title: "MauiWine + King's Cottage Café", description: "Taste unique pineapple wines on the vineyard grounds.", longDescription: "A unique wine-tasting experience at Maui's only winery. We'll sample their famous pineapple wines and enjoy a casual lunch on the beautiful vineyard grounds.", icon: "🍷", search: "MauiWine Ulupalakua", yUrl: "https://www.yelp.com/biz/mauiwine-kula", igUrl: "https://www.instagram.com/mauiwine/", ttUrl: "https://www.tiktok.com/search?q=mauiwine" },
                ]
            },
            day14: {
                title: "Tuesday, Oct 14 – Flex Day for Exploration",
                items: [
                    { time: "Option 1", title: "Upcountry Farmers Market", description: "Local produce, handmade crafts, and breakfast burritos.", longDescription: "A chance to experience local life and pick up some unique souvenirs. This market is known for its fresh produce, delicious food, and handmade crafts.", icon: "🛍️", search: "Upcountry Farmers Market Kula", yUrl: "https://www.yelp.com/biz/upcountry-farmers-market-pukalani", igUrl: "https://www.instagram.com/upcountryfarmersmarket/", ttUrl: "https://www.tiktok.com/search?q=upcountry%20farmers%20market%20maui" },
                    { time: "Option 2", title: "Makawao Town", description: "Cowboy-meets-artist vibes, browse galleries and shops.", longDescription: "Explore Maui's paniolo (cowboy) town. Makawao is filled with charming boutiques, art galleries, and great places to grab a coffee.", icon: "🎨", search: "Makawao Town Maui" },
                    { time: "Option 3", title: "Coral Gardens Snorkel Tour", description: "A quieter alternative to Molokini, launching from Kihei.", longDescription: "A great alternative to the more crowded snorkel spots. Coral Gardens is known for its beautiful coral formations and calm waters.", icon: "🐠", search: "Coral Gardens Snorkel Tour Maui" },
                    { time: "Option 4", title: "Kamaole III Beach", description: "Easygoing beach time to reflect, swim, or nap.", longDescription: "The largest of the three Kamaole beaches, with a big grassy park perfect for relaxing. It's a great spot to spend a lazy afternoon before dinner.", icon: "😴", search: "Kamaole Beach Park III", yUrl: "https://www.yelp.com/biz/kamaole-beach-park-iii-kihei", igUrl: "https://www.instagram.com/explore/tags/kamaolebeachpark3/", ttUrl: "https://www.tiktok.com/search?q=kamaole%20beach%20park%203" },
                ]
            },
            day15: {
                title: "Wednesday, Oct 15 – Departure Day",
                items: [
                    { time: "8:00 AM", title: "Final Beach Dip", description: "One last swim at Kamaole Beach before packing up.", longDescription: "One last chance to soak up the Maui sun and enjoy the beautiful ocean before we have to leave.", icon: "🌊", search: "Kamaole Beach Park I", yUrl: "https://www.yelp.com/biz/kamaole-beach-park-i-kihei", igUrl: "https://www.instagram.com/explore/tags/kamaolebeachpark1/", ttUrl: "https://www.tiktok.com/search?q=kamaole%20beach%20park%201" },
                    { time: "10:00 AM", title: "Final Pack & Checkout", description: "Quick rinse and head to the airport.", longDescription: "Time to pack our bags, say goodbye to the condo, and get ready to head to the airport.", icon: "🧳" },
                    { time: "12:05 PM", title: "Depart OGG → LAX", description: "Mahalo, Maui! Until next time.", longDescription: "Mahalo, Maui! It's been an incredible trip. Until next time.", icon: "✈️" },
                ]
            },
            packing: {
                title: "Interactive Packing List",
                items: [
                    { item: "Sunglasses", note: "Polarized recommended", amazonSearchTerm: "polarized sunglasses" },
                    { item: "Swimwear x2", note: "For beach, snorkeling, pool", amazonSearchTerm: "swimwear" },
                    { item: "Hat", note: "Sun protection", amazonSearchTerm: "sun hat" },
                    { item: "Reef-safe Sunscreen", note: "Required by law in Hawaii", amazonSearchTerm: "reef safe sunscreen" },
                    { item: "Flip-flops / Sandals", note: "For general wear", amazonSearchTerm: "sandals" },
                    { item: "Comfortable walking shoes", note: "For hikes and exploration", amazonSearchTerm: "walking shoes" },
                    { item: "Light jacket / sweater", note: "Evenings can get breezy", amazonSearchTerm: "light jacket" },
                    { item: "Camera or smartphone", note: "For all the memories", amazonSearchTerm: "waterproof phone case" },
                    { item: "Packable beach towel", note: "Not always available at beaches", amazonSearchTerm: "packable beach towel" },
                    { item: "Reusable water bottle", note: "Stay hydrated!", amazonSearchTerm: "reusable water bottle" },
                    { item: "Packable tote/beach bag", note: "For markets and beach gear", amazonSearchTerm: "packable beach bag" },
                    { item: "Toiletries", note: "Don't forget after-sun lotion!", amazonSearchTerm: "travel toiletries" },
                    { item: "Undergarments & socks", note: "Bring extras!", amazonSearchTerm: "socks" },
                ]
            },
            guidebook: {
                title: "Maui Guidebook",
                isGuidebook: true,
                restaurants: {
                    title: "🍽️ Restaurants",
                    items: [
                        { time: "Closes by 2 PM", title: "Ichiban Okazuya – Wailuku", description: "Local-style lunch plates known for garlic chicken, miso butterfish, and grilled ahi. Great for lunch if you’re in Wailuku.", icon: "🍱", search: "Ichiban Okazuya Wailuku", yUrl: "https://www.yelp.com/biz/ichiban-okazuya-wailuku" },
                        { time: "Best for breakfast or early lunch", title: "Waikapū on 30 – Wailuku", description: "Local produce stand serving bentos, sandwiches, musubi & fresh smoothies. Popular with locals for grab-and-go.", icon: "🥪", search: "Waikapū on 30 Wailuku", yUrl: "https://www.yelp.com/biz/waikapu-on-30-wailuku" },
                    ]
                },
                snorkelSpots: {
                    title: "🐢 Snorkel Spots",
                    items: [
                        { time: "🥇 1. Ahihi Cove – Makena", title: "“Natural aquarium” vibes", description: "Crystal-clear, protected waters. Beginner friendly, high fish density. Best in the mornings. No sandy beach (rocky entry), but the fish life and visibility are unmatched.", icon: "🌊", search: "Ahihi Kinau Natural Area Reserve" },
                        { time: "🥈 2. Ulua Beach – Wailea", title: "Easy access & balanced scenery", description: "Beginner-friendly reef close to shore. Super easy access, occasional turtles, and has showers/facilities. Best morning visibility.", icon: "🐠", search: "Ulua Beach" },
                        { time: "🥉 3. Maluaka Beach (Turtle Town)", title: "Known for turtles", description: "Long stretch of quiet beach. Great for turtle sightings! Visibility can be hit or miss in October.", icon: "🐢", search: "Maluaka Beach" },
                        { time: "4️⃣ Honolua Bay – Northwest Maui", title: "Unreal reef", description: "Epic on calm days, but can be for advanced snorkelers if windy. Gorgeous but hard to catch in optimal conditions during October.", icon: "🌴", search: "Honolua Bay" },
                        { time: "5️⃣ Kapalua Bay – Northwest Maui", title: "Sheltered cove", description: "Great for lounging. Still scenic and calm, but reef isn’t as lively as other spots.", icon: "🪸", search: "Kapalua Bay" },
                    ]
                },
                farmersMarkets: {
                    title: "🍓 Farmers Markets",
                    special: "market",
                    items: [
                        { time: "Mon-Sat, 8AM-4PM", title: "Farmers Market Maui – Kihei", description: "Neighborhood market with fruits, smoothies, and local crafts.", longDescription: "A great neighborhood market close to the condo. Perfect for picking up fresh tropical fruits, smoothies, and locally made crafts.", icon: "🍓", search: "Farmers Market Maui Kihei", yUrl: "https://www.yelp.com/biz/farmers-market-maui-kihei", igUrl: "https://www.instagram.com/explore/tags/farmersmarketmaui/", ttUrl: "https://www.tiktok.com/search?q=farmers%20market%20maui%20kihei" },
                        { time: "Tuesdays, 8AM-11AM", title: "Wailea Village Farmers Market", description: "Upscale artisan market with baked goods, flowers, and boutique foods.", longDescription: "An upscale artisan market with a great selection of baked goods, local flowers, and boutique foods. A fun place to browse and pick up some unique souvenirs.", icon: "🌺", search: "Wailea Village Farmers Market", yUrl: "https://www.yelp.com/biz/wailea-village-farmers-market-wailea" },
                        { time: "Mon/Wed/Fri, 8AM-12PM", title: "Maui Nui Farmers Market - Kahului", description: "Local favorite for fresh produce and tropical fruits.", longDescription: "A true local's market. This is the place to go for the freshest produce and tropical fruits at great prices.", icon: "🍍", search: "Maui Nui Farmers Market Kahului", yUrl: "https://www.yelp.com/biz/maui-nui-farmers-market-kahului" },
                        { time: "Open daily, 9AM-4PM", title: "Kula Country Farms Farm Stand", description: "Scenic upcountry stop with strawberry-picking and local jams.", longDescription: "A scenic upcountry stop with incredible views. They offer strawberry-picking (in season), delicious local jams, and the famous Hana swirl ice cream.", icon: "🚜", search: "Kula Country Farms Kula", yUrl: "https://www.yelp.com/biz/kula-country-farms-kula", igUrl: "https://www.instagram.com/kulacountryfarms/", ttUrl: "https://www.tiktok.com/search?q=kula%20country%20farms" },
                        { time: "Wed & Sat, 8AM-12PM", title: "Napili Farmers Market - Lahaina", description: "Smoothie bowls, fruit juices, and organic produce.", longDescription: "A great little market in West Maui. Perfect for grabbing a smoothie bowl or some fresh fruit juice before a beach day in Kapalua.", icon: "🥥", search: "Napili Farmers Market Lahaina", yUrl: "https://www.yelp.com/biz/napili-farmers-market-lahaina" },
                    ]
                }
            },
            crashOutGame: {
                title: "Who's Gonna Crash Out?",
                isGame: true
            }
        };

        const contentDisplay = document.getElementById('content-display');
        const reviewModal = document.getElementById('review-modal');
        const modalContent = reviewModal.querySelector('.modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalDescription = document.getElementById('modal-description');
        const googleLink = document.getElementById('google-link');
        const yelpLink = document.getElementById('yelp-link');
        const instagramLink = document.getElementById('instagram-link');
        const tiktokLink = document.getElementById('tiktok-link');

        let activeScrollTrigger;
        let activeObserver;
        let gameResizeHandler = null; 

        const scrollPositions = {}; 
        let currentContentKey = 'travelHub'; 

        function showContent(key) {
            scrollPositions[currentContentKey] = window.scrollY;

            if (activeScrollTrigger) activeScrollTrigger.kill();
            if (activeObserver) activeObserver.disconnect();
            if (gameResizeHandler) {
                window.removeEventListener('resize', gameResizeHandler);
                gameResizeHandler = null;
            }

            const currentCard = contentDisplay.querySelector('.content-card, .guidebook-card');
            if (currentCard) {
                currentCard.style.opacity = '0';
            }
            
            setTimeout(() => {
                contentDisplay.innerHTML = '';
                const data = itineraryData[key];
                const card = document.createElement('div');
                
                if (data.isGuidebook) {
                    card.className = 'guidebook-card p-6 md:p-8 rounded-2xl shadow-lg';
                } else {
                    card.className = 'content-card p-6 md:p-8 rounded-2xl shadow-lg';
                }
                
                if (data.special === 'snorkel' || data.special === 'market' || data.special === 'hana') {
                    card.classList.add('overflow-clip');
                }
                
                if (data.special === 'hana') card.classList.add('hana-card');
                
                card.style.opacity = '0';

                let contentHTML = `<h2 class="text-3xl font-bold text-gray-800 mb-6 scroll-animate">${data.title}</h2>`;

                if (data.isMap) {
                    contentHTML += `<iframe src="https://www.google.com/maps/d/u/0/embed?mid=1usOiJSmLDU0Pb7yOJQ0oKX05e1r_CwI" width="100%" height="480" class="rounded-lg shadow-md"></iframe>`;
                } else if (data.isGuidebook) {
                    const tabs = Object.keys(data).filter(k => typeof data[k] === 'object' && data[k].title);
                    
                    contentHTML += `<div id="guidebook-tabs-container">`;
                    contentHTML += `<div class="flex space-x-2 overflow-x-auto no-scrollbar">`; 
                    tabs.forEach((tabKey, index) => {
                        const titleParts = data[tabKey].title.split(' ');
                        const icon = titleParts[0];
                        const label = titleParts.slice(1).join(' ');
                        contentHTML += `<button class="guidebook-tab ${index === 0 ? 'active' : ''}" onclick="showGuidebookTab('${tabKey}')">
                                            <span class="icon">${icon}</span>
                                            <span class="label">${label}</span>
                                       </button>`;
                    });
                    contentHTML += `</div></div>`;

                    tabs.forEach((tabKey, index) => {
                        const tabData = data[tabKey];
                        contentHTML += `<div id="tab-${tabKey}" class="tab-content ${index === 0 ? 'active' : ''}"><div class="space-y-2">`;
                        tabData.items.forEach(item => {
                            const clickableClass = item.search ? 'itinerary-item-clickable rounded-lg p-4 -ml-4' : 'p-4 -ml-4';
                            let clickableAttrs = item.search ? `
                                data-title="${item.title.replace(/"/g, '\"')}" 
                                data-search="${item.search.replace(/"/g, '\"')}" 
                                data-yurl="${item.yUrl || ''}"
                                data-igurl="${item.igUrl || ''}"
                                data-tturl="${item.ttUrl || ''}"
                                data-description="${(item.longDescription || item.description).replace(/"/g, '\"')}"
                            ` : '';
                            contentHTML += `<div class="scroll-animate ${clickableClass}" ${clickableAttrs}>
                                <div class="relative pl-10">
                                    <div class="absolute -left-1 top-1 h-8 w-8 rounded-full bg-cyan-500 flex items-center justify-center text-white text-lg ring-4 ring-white timeline-icon">${item.icon}</div>
                                    <p class="text-sm font-semibold text-cyan-600">${item.time}</p>
                                    <h3 class="text-xl font-bold text-gray-800">${item.title}</h3>
                                    <p class="text-gray-600">${item.description}</p>
                                </div>
                            </div>`;
                        });
                        contentHTML += `</div></div>`;
                    });
                } else if (data.special === 'hana') {
                    contentHTML = `<div class="hana-background"></div>
                        <div class="relative z-10 p-6 md:p-8">
                            <h2 class="text-3xl font-bold text-gray-800 mb-6 scroll-animate">${data.title}</h2>
                            <div class="relative w-full h-auto" style="min-height: 1500px;">
                                <svg class="absolute top-0 left-0 w-full h-full" preserveAspectRatio="none" viewBox="0 0 100 1300">
                                    <path id="road-path" d="M 50 20 C 150 100, 0 200, 50 300 S 150 400, 50 500 S 0 600, 50 700 S 150 800, 50 900 S 0 1000, 50 1100 S 150 1200, 50 1300" stroke="rgba(167, 243, 208, 0.7)" stroke-width="8" fill="none" />
                                </svg>
                                <div class="road-to-hana-car text-3xl">🚙</div>
                                <div class="space-y-24 relative z-20">
                                    ${data.items.map(item => {
                                        const clickableClass = item.search ? 'itinerary-item-clickable' : '';
                                        let clickableAttrs = item.search ? `
                                            data-title="${item.title.replace(/"/g, '\"')}" 
                                            data-search="${item.search.replace(/"/g, '\"')}" 
                                            data-yurl="${item.yUrl || ''}"
                                            data-igurl="${item.igUrl || ''}"
                                            data-tturl="${item.ttUrl || ''}"
                                            data-description="${(item.longDescription || item.description).replace(/"/g, '\"')}"
                                        ` : '';
                                        return `<div class="scroll-animate ${clickableClass}" ${clickableAttrs}>
                                            <div class="relative pl-10">
                                                <div class="absolute -left-1 top-1 h-8 w-8 rounded-full bg-cyan-500 flex items-center justify-center text-white text-lg ring-4 ring-white timeline-icon">${item.icon}</div>
                                                <p class="text-sm font-semibold text-cyan-600">${item.time}</p>
                                                <h3 class="text-xl font-bold text-gray-800">${item.title}</h3>
                                                <p class="text-gray-600">${item.description}</p>
                                            </div>
                                        </div>`;
                                    }).join('')}
                                </div>
                            </div>
                        </div>`;
                } else if (data.isGame) {
                    contentHTML += `
                    <div class="game-container p-4 rounded-lg">
                         <header class="text-center mb-4 md:mb-8">
                             <h1 class="text-3xl sm:text-4xl md:text-5xl font-black tracking-tighter uppercase">Who's Gonna Crash Out?</h1>
                             <p class="text-md sm:text-lg text-blue-200 mt-2">Spin the wheel to seal your fate!</p>
                         </header>
                         <div id="wheelContainer">
                             <div id="lights"></div>
                             <canvas id="wheel"></canvas>
                             <div id="pointer"></div>
                         </div>
                         <div class="text-center mt-4">
                             <button id="spinBtn" class="spin-button">Spin!</button>
                         </div>
                         <div id="result" class="mt-6 text-xl md:text-2xl font-bold text-amber-300 text-center h-8"></div>
                    </div>
                    `;
                } else if (key === 'packing') {
                    contentHTML += '<div class="space-y-4">';
                    data.items.forEach((p, index) => {
                        const amazonUrl = `https://www.amazon.com/s?k=${encodeURIComponent(p.amazonSearchTerm)}&rh=p_76%3A1250221011`;
                        contentHTML += `
                        <div class="packing-item flex items-center bg-gray-50 p-3 rounded-lg scroll-animate">
                            <input type="checkbox" id="item-${index}" class="h-5 w-5 rounded border-gray-300 text-cyan-600 focus:ring-cyan-500 mr-4">
                            <label for="item-${index}" class="flex-grow packing-label">
                                <span class="font-semibold text-gray-700">${p.item}</span>
                                <span class="text-sm text-gray-500 block">${p.note}</span>
                            </label>
                            <a href="${amazonUrl}" target="_blank" class="bg-yellow-400 text-gray-900 font-bold text-xs px-3 py-1 rounded-full hover:bg-yellow-500 transition-colors">🛒 Shop Prime</a>
                        </div>`;
                    });
                    contentHTML += '</div>';
                } else if (key === 'travelHub') {
                     data.bookings.forEach(booking => {
                           if (booking.type === 'Condo') {
                               contentHTML += `
                               <a href="${booking.url}" target="_blank" class="block ticket-link scroll-animate mb-6">
                                   <div class="key-card">
                                       <div class="key-card-left">
                                           <div class="key-card-logo">MV</div>
                                           <p class="key-card-hotel">Maui Vista</p>
                                           <div class="key-card-hole"></div>
                                       </div>
                                       <div class="key-card-right">
                                           <p class="font-bold text-lg text-gray-800">${booking.name}</p>
                                           <p class="text-gray-600 text-sm">${booking.details}</p>
                                           <p class="text-xs text-gray-500 mt-2">${booking.confirmation}</p>
                                           <div class="key-card-strip"></div>
                                       </div>
                                   </div>
                               </a>`;
                           } else {
                               contentHTML += `
                               <div class="ticket scroll-animate">
                                    <div class="ticket-main">
                                        <div class="flex justify-between items-center mb-4">
                                            <div>
                                                <p class="text-sm text-gray-500">${booking.type}</p>
                                                <p class="font-bold text-lg text-gray-800">${booking.name}</p>
                                            </div>
                                            <img src="${booking.logo}" alt="${booking.name} Logo" class="h-8">
                                        </div>
                                        <p class="text-gray-600">${booking.details}</p>
                                        <p class="text-sm text-gray-500 mt-2">${booking.confirmation}</p>
                                    </div>
                               </div>`;
                           }
                     });
                     data.passengers.forEach(person => {
                          contentHTML += `<h3 class="text-2xl font-bold text-gray-800 mb-4 mt-6 scroll-animate">${person.name}</h3>`;
                          person.flights.forEach(flight => {
                              contentHTML += `
                              <a href="https://www.google.com/search?q=${flight.airline} ${flight.flightNum}" target="_blank" class="block ticket-link scroll-animate">
                                   <div class="ticket">
                                       <div class="ticket-main">
                                           <div class="flex justify-between items-center mb-4">
                                               <div>
                                                   <p class="text-sm sm:text-base text-gray-500">${flight.type}</p>
                                                   <p class="font-bold text-base sm:text-lg text-gray-800">${flight.airline}</p>
                                               </div>
                                               <img src="${flight.logo}" alt="${flight.airline} Logo" class="airline-logo">
                                           </div>
                                           <div class="flex flex-col sm:flex-row sm:justify-between sm:items-end space-y-4 sm:space-y-0">
                                               <div>
                                                   <p class="text-xs sm:text-sm text-gray-500">From</p>
                                                   <p class="text-2xl sm:text-3xl font-bold text-gray-900">${flight.from}</p>
                                                   <p class="text-xs sm:text-sm text-gray-600">${flight.departure}</p>
                                               </div>
                                               <div class="text-center text-gray-400 hidden sm:block">✈️</div>
                                               <div class="text-left sm:text-right">
                                                   <p class="text-xs sm:text-sm text-gray-500">To</p>
                                                   <p class="text-2xl sm:text-3xl font-bold text-gray-900">${flight.to}</p>
                                                   <p class="text-xs sm:text-sm text-gray-600">${flight.arrival}</p>
                                               </div>
                                           </div>
                                       </div>
                                       <div class="ticket-rip bg-gray-50 flex flex-col justify-center items-center">
                                           <p class="text-xs text-gray-500 transform -rotate-90 whitespace-nowrap">Flight ${flight.flightNum}</p>
                                       </div>
                                   </div>
                              </a>
                              `;
                          });
                     });
                } else if (data.items) {
                    contentHTML += '<div class="space-y-2">';
                    data.items.forEach(item => {
                        const clickableClass = item.search ? 'itinerary-item-clickable rounded-lg p-4 -ml-4' : 'p-4 -ml-4';
                        let clickableAttrs = item.search ? `
                            data-title="${item.title.replace(/"/g, '\"')}" 
                            data-search="${item.search.replace(/"/g, '\"')}" 
                            data-yurl="${item.yUrl || ''}"
                            data-igurl="${item.igUrl || ''}"
                            data-tturl="${item.ttUrl || ''}"
                            data-description="${(item.longDescription || item.description).replace(/"/g, '\"')}"
                        ` : '';
                        contentHTML += `<div class="scroll-animate ${clickableClass}" ${clickableAttrs}>
                            <div class="relative pl-10">
                                <div class="absolute -left-1 top-1 h-8 w-8 rounded-full bg-cyan-500 flex items-center justify-center text-white text-lg ring-4 ring-white timeline-icon">${item.icon}</div>
                                <p class="text-sm font-semibold text-cyan-600">${item.time}</p>
                                <h3 class="text-xl font-bold text-gray-800">${item.title}</h3>
                                <p class="text-gray-600">${item.description}</p>
                            </div>
                        </div>`;
                    });
                    contentHTML += '</div>';
                }
                
                card.innerHTML = contentHTML;
                contentDisplay.appendChild(card);
                
                 if (data.isGame) initializeCrashOutGame();
                
                const createFloatingItems = (items, className) => {
                    for (let i = 0; i < 15; i++) {
                        const item = document.createElement('div');
                        item.className = className;
                        if (className === 'bubble') {
                            const size = Math.random() * 20 + 5;
                            item.style.width = `${size}px`;
                            item.style.height = `${size}px`;
                        } else {
                            item.textContent = items[Math.floor(Math.random() * items.length)];
                        }
                        item.style.left = `${Math.random() * 100}%`;
                        item.style.animationDuration = `${Math.random() * 5 + 8}s`;
                        item.style.animationDelay = `${Math.random() * 5}s`;
                        card.appendChild(item);
                    }
                };

                if (data.special === 'snorkel') createFloatingItems([], 'bubble');
                if (data.special === 'market') createFloatingItems(['🍓', '🍍', '🥥', '🌺'], 'floating-emoji');

                document.querySelectorAll('.itinerary-item-clickable').forEach(el => {
                    el.addEventListener('click', (e) => {
                        const target = e.currentTarget;
                        const { title, search, yurl, igurl, tturl, description } = target.dataset;
                        openReviewModal(title, search, yurl, igurl, tturl, description);
                    });
                });
                
                setTimeout(() => {
                    window.scrollTo(0, scrollPositions[key] || 0);
                    card.style.opacity = '1';
                }, 50);

                setTimeout(() => {
                    card.classList.add('active');
                    if (data.special === 'hana') {
                        gsap.registerPlugin(ScrollTrigger, MotionPathPlugin);
                        gsap.to(".hana-background", {
                            backgroundPosition: "50% 100%", ease: "none",
                            scrollTrigger: { trigger: ".content-card", start: "top top", end: "bottom bottom", scrub: true }
                        });
                        activeScrollTrigger = ScrollTrigger.create({
                            trigger: ".content-card", start: "top top", end: "bottom bottom", scrub: true,
                            animation: gsap.to(".road-to-hana-car", {
                                motionPath: { path: "#road-path", align: "#road-path", alignOrigin: [0.5, 0.5], autoRotate: true },
                                ease: "none"
                            }),
                        });
                    }

                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach((entry, index) => {
                            if (entry.isIntersecting) {
                                setTimeout(() => entry.target.classList.add('visible'), index * 100);
                            }
                        });
                    }, { threshold: 0.1 });
                    document.querySelectorAll('.scroll-animate').forEach(el => observer.observe(el));
                    activeObserver = observer;
                }, 50);

                document.querySelectorAll('.day-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`button[onclick="showContent('${key}')"]`).classList.add('active');
                
                currentContentKey = key;

            }, 200);
        }

        function showGuidebookTab(tabKey) {
            document.querySelectorAll('.guidebook-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector(`.guidebook-tab[onclick="showGuidebookTab('${tabKey}')"]`).classList.add('active');
            document.getElementById(`tab-${tabKey}`).classList.add('active');
        }

        function openReviewModal(title, searchTerm, yUrl, igUrl, ttUrl, description) {
            const encodedSearchTerm = encodeURIComponent(searchTerm);
            modalTitle.textContent = title;
            modalDescription.textContent = description || "Check out what others are saying on your favorite platforms.";
            googleLink.href = `https://www.google.com/maps/search/?api=1&query=${encodedSearchTerm}`;
            yelpLink.href = yUrl || `https://www.yelp.com/search?find_desc=${encodedSearchTerm}`;
            instagramLink.href = igUrl || `https://www.instagram.com/explore/tags/${encodedSearchTerm}/`;
            tiktokLink.href = ttUrl || `https://www.tiktok.com/search?q=${encodedSearchTerm}`;
            
            reviewModal.classList.remove('hidden');
            setTimeout(() => {
                reviewModal.classList.remove('opacity-0');
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }

        function closeReviewModal() {
            reviewModal.classList.add('opacity-0');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => reviewModal.classList.add('hidden'), 300);
        }
        
        function initializeCrashOutGame() {
            const canvas = document.getElementById('wheel');
            const wheelContainer = document.getElementById('wheelContainer');
            if (!canvas || !wheelContainer) return;

            const ctx = canvas.getContext('2d');
            const spinBtn = document.getElementById('spinBtn');
            const resultDiv = document.getElementById('result');
            const pointer = document.getElementById('pointer');
            const lightsContainer = document.getElementById('lights');

            const segments = [
                { color: '#ec4899', label: 'Chris' }, { color: '#38bdf8', label: 'Jade' },
                { color: '#f97316', label: 'Tim' }, { color: '#84cc16', label: 'Alex' }
            ];
            const resultPhrases = ["is on meltdown watch!", "is officially on the verge!", "is spiraling!", "is about to crash out!", "needs a minute. Or ten."];
            const segCount = segments.length;
            const arcSize = 360 / segCount;
            const pegCount = segCount * 4;
            let lightsTimeline;

            const tickSynth = new Tone.Synth({ oscillator: { type: 'sine', frequency: 440 }, envelope: { attack: 0.005, decay: 0.05, sustain: 0, release: 0.1 } }).toDestination();
            const winSynth = new Tone.PluckSynth({ attackNoise: 1, dampening: 4000, resonance: 0.7 }).toDestination();

            function playTick() {
                if (Tone.context.state !== 'running') return;
                tickSynth.triggerAttackRelease('C5', '32n');
                gsap.fromTo(pointer, {rotate: 0}, {rotate: (Math.random() > 0.5 ? 1 : -1) * 15, duration: 0.05, ease: 'power2.out', yoyo: true, repeat: 1});
            }
            function playWin() {
                if (Tone.context.state !== 'running') return;
                const notes = ['G4', 'A4', 'C5', 'E5'];
                const now = Tone.now();
                notes.forEach((note, i) => winSynth.triggerAttackRelease(note, '8n', now + i * 0.1));
            }
            
            const numLights = 16;
            const lights = [];
            for (let i = 0; i < numLights; i++) {
                const light = document.createElement('div');
                light.className = 'light';
                lightsContainer.appendChild(light);
                lights.push(light);
            }

            function drawWheel() {
                const radius = canvas.width / 2;
                const pegRadius = Math.max(3, Math.floor(canvas.width / 80));
                const fontSize = Math.max(12, Math.floor(canvas.width / 13));
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                segments.forEach((segment, i) => {
                    const startAngle = i * arcSize;
                    const endAngle = startAngle + arcSize;
                    ctx.fillStyle = segment.color;
                    ctx.beginPath();
                    ctx.moveTo(radius, radius);
                    ctx.arc(radius, radius, radius - pegRadius - 5, startAngle * Math.PI / 180, endAngle * Math.PI / 180);
                    ctx.closePath();
                    ctx.fill();
                    ctx.save();
                    ctx.translate(radius, radius);
                    const textAngle = (startAngle + arcSize / 2 + 90) * Math.PI / 180;
                    ctx.rotate(textAngle);
                    ctx.fillStyle = '#ffffff';
                    ctx.font = `900 ${fontSize}px Inter, sans-serif`;
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.shadowColor = 'rgba(0,0,0,0.3)';
                    ctx.shadowBlur = 4;
                    ctx.shadowOffsetX = 2;
                    ctx.shadowOffsetY = 2;
                    ctx.fillText(segment.label.toUpperCase(), 0, -radius * 0.6); 
                    ctx.restore();
                });
                for (let i = 0; i < pegCount; i++) {
                    const angle = (i / pegCount) * 360;
                    const x = radius + Math.cos(angle * Math.PI / 180) * (radius - pegRadius - 2);
                    const y = radius + Math.sin(angle * Math.PI / 180) * (radius - pegRadius - 2);
                    ctx.beginPath();
                    ctx.arc(x, y, pegRadius, 0, 2 * Math.PI);
                    const grad = ctx.createRadialGradient(x-1, y-1, 0, x, y, pegRadius);
                    grad.addColorStop(0, '#fff');
                    grad.addColorStop(0.5, '#cbd5e1');
                    grad.addColorStop(1, '#64748b');
                    ctx.fillStyle = grad;
                    ctx.fill();
                }
                ctx.beginPath();
                ctx.arc(radius, radius, Math.max(15, radius / 10), 0, 2 * Math.PI);
                const centerGrad = ctx.createRadialGradient(radius-5, radius-5, 1, radius, radius, radius/10);
                centerGrad.addColorStop(0, '#fff');
                centerGrad.addColorStop(1, '#94a3b8');
                ctx.fillStyle = centerGrad;
                ctx.fill();
                ctx.strokeStyle = '#64748b';
                ctx.lineWidth = 2;
                ctx.stroke();
            }

            function spin() {
                if (Tone.context.state !== 'running') Tone.start();
                spinBtn.disabled = true;
                gsap.set(resultDiv, { textContent: '', scale: 0, opacity: 0 });
                const targetRotation = gsap.utils.random(5, 10) * 360 + gsap.utils.random(0, 360);
                let lastPeg = 0;
                if (lightsTimeline) lightsTimeline.kill();
                lightsTimeline = gsap.to(lights, { scale: 1.5, opacity: 0.5, duration: 0.1, stagger: { each: 0.05, repeat: -1, yoyo: true }, ease: 'power1.inOut' });
                gsap.to(canvas, {
                    rotation: `+=${targetRotation}`, duration: gsap.utils.random(4, 6), ease: 'power2.out',
                    onUpdate: function() {
                        const currentPeg = Math.floor(this.ratio * pegCount * (targetRotation/360));
                        if (currentPeg > lastPeg) { playTick(); lastPeg = currentPeg; }
                    },
                    onComplete: onSpinComplete
                });
            }
            function onSpinComplete() {
                const finalRotation = gsap.getProperty(canvas, "rotation") % 360;
                const normalizedAngle = gsap.utils.wrap(0, 360)(270 - finalRotation);
                const winnerIndex = Math.floor(normalizedAngle / arcSize);
                const winner = segments[winnerIndex];
                lightsTimeline.kill();
                gsap.to(lights, { scale: 1, opacity: 1, duration: 0.2 });
                const winnerTl = gsap.timeline({ onComplete: () => { spinBtn.disabled = false; } });
                winnerTl.to(lights, { opacity: 0, scale: 2, duration: 0.3, stagger: { each: 0.05, from: "center" } })
                        .to(lights, { opacity: 1, scale: 1, duration: 0.3, stagger: { each: 0.05, from: "center" } }, "-=0.1")
                        .to(pointer, { rotate: -15, duration: 0.1, ease: 'power2.inOut', repeat: 3, yoyo: true }, 0)
                        .call(playWin, [], 0.1)
                        .to(resultDiv, { textContent: `${winner.label} ${resultPhrases[Math.floor(Math.random() * resultPhrases.length)]}`, scale: 1, opacity: 1, duration: 0.5, ease: 'back.out(1.7)' }, 0.5);
            }

            const handleResize = () => {
                const size = wheelContainer.clientWidth;
                if (size > 0) {
                    canvas.width = size; canvas.height = size;
                    drawWheel();
                    const lightsRadius = lightsContainer.clientWidth / 2;
                    lights.forEach((light, i) => {
                        const angle = (i / numLights) * (2 * Math.PI);
                        const x = lightsRadius + lightsRadius * Math.cos(angle);
                        const y = lightsRadius + lightsRadius * Math.sin(angle);
                        gsap.set(light, { left: x, top: y, xPercent: -50, yPercent: -50 });
                    });
                }
            };
            spinBtn.addEventListener('click', spin);
            window.addEventListener('resize', handleResize);
            gameResizeHandler = handleResize;
            handleResize();
        }

        window.onload = () => {
            gsap.registerPlugin(ScrollTrigger);
            gsap.to("header", {
                scrollTrigger: { trigger: "body", start: "top top", end: "bottom top", scrub: true },
                y: 200, ease: "none"
            });
            showContent('travelHub');
        };

        const nav = document.querySelector('nav');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 30) {
                nav.classList.add('nav-scrolled');
            } else {
                nav.classList.remove('nav-scrolled');
            }
        });

    </script>
</body>
</html>

